(this["webpackJsonpcc-frontend"]=this["webpackJsonpcc-frontend"]||[]).push([[0],{204:function(e,t,n){"use strict";n.r(t);var c=n(32),a=n(0),r=n.n(a),i=n(24),s=n.n(i),o=n(87),u=n.n(o),b=n(53),j=n(38),l=n(104),d=n(39),f=n(93),O=n(70),h=n(48),m=n(207),p=n(208),v=n(63),y=n(88),x=n.n(y),g={"543f7794-623d-4f0a-a668-53e5f531aafd":"Politics","8ddbf9a0-be52-40ed-bf5b-4c9609f9a128":"Guns","5ec5af28-5c30-4225-8393-c26326d8e2d9":"Abortion","681b6b25-c283-45cc-a72f-da375b44a265":"Religion","9de70c38-6de7-49e4-8c44-855c2d427968":"Racial justice","841d5268-ce50-45fd-9a86-d30197a6ee02":"Climate change"},w=[{title:"Email",dataIndex:"email",key:"email"}].concat(Object(f.a)(Object.entries(g).map((function(e){var t=Object(d.a)(e,2),n=t[0];return{title:t[1],dataIndex:n,key:n}})))),k=function(){var e=Object(O.b)(),t=e.getAccessTokenSilently,n=e.loginWithRedirect,r=e.isLoading,i=e.isAuthenticated,s=Object(a.useState)([]),o=Object(d.a)(s,2),y=o[0],k=o[1],z=Object(a.useState)(null),S=Object(d.a)(z,2),_=S[0],A=S[1],B=Object(a.useState)([]),I=Object(d.a)(B,2),C=I[0],E=I[1],N=Object(a.useState)({}),q=Object(d.a)(N,2),H=q[0],J=q[1];Object(a.useEffect)((function(){i&&function(){var e=Object(l.a)(u.a.mark((function e(){var n,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return n=e.sent,e.next=5,fetch("https://5qfry2gbjh.execute-api.eu-west-1.amazonaws.com/dev/getSubmissions",{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){return e.json()}));case 5:c=e.sent,a=c.reduce((function(e,t){if(!t||!t.answers||!t.answers.find)return e;var n=t.answers.find((function(e){return"email"===e.type}));if(!n)return e;var c=n.email;return c?Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},c,t.answers.reduce((function(e,t){var n=t.choice,c=(n=void 0===n?{}:n).label,a=n.other,r=t.field.ref;return Object.keys(g).includes(r)?Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},r,c||a)):e}),{}))):e}),{}),k(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[i]),Object(a.useEffect)((function(){if(_){var e=y[_],t=Object.entries(y).map((function(t){var n=Object(d.a)(t,2),c=n[0],a=n[1];if(c===_)return!1;var r=Object(v.omitBy)(a,(function(t,n){return e[n]===t}));return!!Object(v.size)(r)&&[c,r]})).filter(Boolean).reduce((function(e,t){var n=Object(d.a)(t,2),c=n[0],a=n[1];return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},c,a))}),{});J(t)}else J({})}),[_]);return r?null:i?Object(c.jsxs)("div",{className:x.a.container,children:[Object(c.jsx)(m.a,{className:x.a.search,onSearch:function(e){var t=Object.keys(y).filter((function(t){return t.includes(e)})).map((function(e){return{value:e}}));E(t)},onSelect:function(e){return A(e)},options:C,placeholder:"charles.ompassion@crisis.org"}),Object(c.jsx)(p.a,{dataSource:_?[Object(j.a)({key:_,email:_},y[_])].concat(Object(f.a)(Object.entries(H).sort((function(e,t){return Object(v.size)(t[1])-Object(v.size)(e[1])})).map((function(e){var t=Object(d.a)(e,2),n=t[0],c=t[1];return Object(j.a)({key:n,email:n},c)})))):[],columns:w,locale:{emptyText:"Search an email to see some delicious results"},pagination:!1})]}):Object(c.jsx)(h.a,{size:"large",onClick:function(){return n()},children:"Log In"})};k.displayName="App";n(203);s.a.render(Object(c.jsx)(O.a,{audience:"https://5qfry2gbjh.execute-api.eu-west-1.amazonaws.com/",domain:"dev-2g9z9q0r.eu.auth0.com",clientId:"lhY52r9n6PzCzCzNHynJhHHpQZKuxoUB",redirectUri:window.location.origin,children:Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(k,{})})}),document.getElementById("root"))},88:function(e,t,n){e.exports={container:"style_container__XThPV",search:"style_search__XaW58"}}},[[204,1,2]]]);
//# sourceMappingURL=main.87edda62.chunk.js.map